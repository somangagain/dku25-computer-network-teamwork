# 메일 소프트웨어 시스템 기술 명세서 v0.1

---

## 1. 문서 개요

| 항목        | 내용                                                        |
| ----------- | ----------------------------------------------------------- |
| 문서 목적   | 사용자 간 이메일 송수신 가능한 경량 이메일 시스템 기술 명세 |
| 시스템 목표 | 기본 메일 기능, TCP 기반 소켓 통신, 확장 가능한 구조 제공   |

---

## 2. 참여자 정보

| 학번     | 학과           | 이름   |
| -------- | -------------- | ------ |
| 32207033 | 소프트웨어학과 | 강준형 |
| 32210080 | 정치외교학과   | 강유진 |
| 32230256 | 소프트웨어학과 | 권민지 |
| 32240745 | 소프트웨어학과 | 김성수 |

---

## 3. 시스템 구성 요소

| 구성요소   | 기능                                   |
| ---------- | -------------------------------------- |
| 클라이언트 | GUI 제공, 사용자 요청 처리             |
| 메일 서버  | 메일 송수신, 큐 관리, 사용자 요청 처리 |
| DNS 서버   | 메일 서버 IP, PORT, 상태 관리          |

---

## 4. 기능적 요구사항

| 구성요소   | 필수 기능                                          |
| ---------- | -------------------------------------------------- |
| 클라이언트 | 로그인, 로그아웃, 메일 조회/열람/삭제/작성 및 전송 |
| 메일 서버  | 메일 처리, 송수신 큐 관리, 사용자 요청 처리        |
| DNS 서버   | 메일 서버 상태 관리, 주기적 상태 모니터링          |

---

## 5. 기술 스택

| 범주            | 선택 기술                |
| --------------- | ------------------------ |
| 프로그래밍 언어 | Python                   |
| 네트워크        | TCP 소켓 프로그래밍      |
| 데이터베이스    | MySQL (단계별 도입 예정) |

---

## 6. 개발 단계

| 단계      | 주요 내용                                    |
| --------- | -------------------------------------------- |
| 초기 단계 | 인메모리 구조로 메일 정보 관리               |
| 중간 단계 | MySQL 읽기 전용 도입 → 데이터 영속성 확보    |
| 완성 단계 | MySQL 읽기/쓰기 적용 → 확장성 및 복구성 강화 |

---

## 7. 메일 서버 간 통신 설계

### 7.1 전송 절차

| 단계 | 설명                                               |
| ---- | -------------------------------------------------- |
| 1    | 메일 객체 생성 및 Outbox 저장                      |
| 2    | DNS 서버 조회                                      |
| 3    | 상대 서버 상태 확인                                |
| 4    | 상태별 처리 방식 결정 (즉시 전송/재시도/실패 기록) |
| 5    | TCP로 외부 서버 전송                               |
| 6    | 수신 결과에 따라 재시도 또는 완료 기록             |

### 7.2 상태 처리 정책

| 상태     | 처리 방식                    |
| -------- | ---------------------------- |
| OK       | 즉시 전송                    |
| OVERLOAD | 큐의 후순위로 이동 후 재시도 |
| FAIL     | 전송 실패, 로그 기록         |

### 7.3 큐 관리 전략

| 큐 유형 | 방향      | 처리 방식               |
| ------- | --------- | ----------------------- |
| Outbox  | 내부→외부 | FIFO, 상태 확인 후 처리 |
| Inbox   | 외부→내부 | 검증 후 유효 시 DB 저장 |

---

## 8. 클라이언트-서버 통신 프로토콜

### 8.1 명령 및 응답 코드

| 명령   | 요청 인자               | 응답 코드                      |
| ------ | ----------------------- | ------------------------------ |
| LOGIN  | ID, Password            | OK, ID_UNKNOWN, PASSWORD_WRONG |
| LOGOUT | 없음                    | BYE                            |
| LIST   | 없음                    | 메일 메타데이터(JSON 배열)     |
| READ   | Mail ID                 | READ_OK, MAIL_NOT_FOUND        |
| DELETE | Mail ID                 | DELETE_OK, DELETE_FAIL         |
| SEND   | Receiver, Subject, Body | SEND_OK, SEND_FAIL             |

### 8.2 요청/응답 메시지 형식

| 구분        | 형식 예시                              |
| ----------- | -------------------------------------- |
| 요청 메시지 | `LOGIN::user::pass`                    |
| 응답 메시지 | `OK` / `READ_OK::본문내용` / `SEND_OK` |

### 8.3 에러 처리

| 에러 유형   | 응답 메시지       |
| ----------- | ----------------- |
| 잘못된 명령 | INVALID_COMMAND   |
| 인자 부족   | INVALID_ARGUMENTS |
| 인증 실패   | UNAUTHORIZED      |

---

## 9. 향후 확장 계획

| 항목             | 내용                       |
| ---------------- | -------------------------- |
| 회원가입 지원    | 추후 구현 예정             |
| 암호화 통신 지원 | TLS 등                     |
| 서버 이중화      | HA(High Availability) 구성 |
| 관리자 기능      | 로그, 상태 관리, 통계      |

---
